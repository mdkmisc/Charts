<?php

$graph = "
    <script type='text/javascript'>
		FusionCharts.ready(function () {
			var revenueChart = new FusionCharts({
				type: 'column2d',
				renderAt: '$this->id',
				"; if ($this->responsive) {
    $graph .= "
							width: '100%',
							height: '100%',
						";
} else {
    $graph .= "
							width: '$this->width',
							height: '$this->height',
						";
}
                $graph .= "
				dataFormat: 'json',
				dataSource: {
					'chart': {
						'caption': \"$this->title\",
						'yAxisName': \"$this->element_label\",
						'paletteColors': '#0075c2',
						'bgColor': '#ffffff',
						'borderAlpha': '20',
						'canvasBorderAlpha': '0',
						'usePlotGradientColor': '0',
						'plotBorderAlpha': '10',
						'rotatevalues': '1',
						'valueFontColor': '#ffffff',                
						'showXAxisLine': '1',
						'xAxisLineColor': '#999999',
						'divlineColor': '#999999',               
						'divLineIsDashed': '1',
						'showAlternateHGridColor': '0',
						'subcaptionFontBold': '0',
						'subcaptionFontSize': '14'
					},            
					'data': [
						";
                            $i = 0;
                            foreach ($this->values as $v) {
                                $l = $this->labels[$i];
                                $graph .= "
									{
										'label': \"$l\",
										'value': \"$v\",
										";
                                if ($this->colors) {
                                    $graph .= "
												'color': \"".$this->colors[$i].'",
											';
                                }
                                $graph .= '
									}, 
								';
                                $i++;
                            }
                        $graph .= "
					],
				}
			}).render();
		});
    </script>
	<div id='$this->id'></div>
";

return $graph;
